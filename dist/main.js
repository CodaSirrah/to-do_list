(()=>{"use strict";class e{constructor(e){this.name=e}}e.prototype.title,e.prototype.description,e.prototype.dueDate,e.prototype.priority,e.prototype.complete;class t{constructor(e){this.name=e}}class s{constructor(e){this.title=e,this.tasks=[]}}const a=()=>{const e=e=>{document.querySelector("#content").remove();const t=document.createElement("div");t.setAttribute("id","content");const s=document.createElement("h3");s.innerHTML="Tasks",s.setAttribute("id","tasks"),t.appendChild(s),e.appendChild(t);const a=document.createElement("div");a.classList.add("headersContainer");const n=document.createElement("h5");n.innerHTML="Title",n.classList.add("header"),n.setAttribute("id","hTitle");const c=document.createElement("h5");c.innerHTML="Description",c.classList.add("header"),c.setAttribute("id","hDescription");const i=document.createElement("h5");i.innerHTML="Due-date",i.classList.add("hCenter"),i.classList.add("header"),i.setAttribute("id","hDueDate");const r=document.createElement("h5");r.innerHTML="Priority",r.classList.add("hCenter"),r.classList.add("header"),r.setAttribute("id","hPriority"),a.appendChild(n),a.appendChild(c),a.appendChild(i),a.appendChild(r),t.appendChild(a)};return{displayWelcome:e=>{const t=document.createElement("h1");t.setAttribute("id","welcome"),t.innerHTML=`Welcome ${localStorage.getItem("userName")}`,e.appendChild(t)},displayForm:(e,t,s)=>{e.addEventListener("click",(()=>{t.classList.contains("hidden")?(t.classList.remove("hidden"),setTimeout((()=>{t.classList.remove("visuallyhidden")}),20),"true"===s&&t.classList.add("scale")):(t.classList.add("visuallyhidden"),t.addEventListener("transitionend",(()=>{t.classList.add("hidden"),t.classList.remove("scale")}),{capture:!1,once:!0,passive:!1}))}),!1)},hideLabel:(e,t)=>{e.addEventListener("input",(()=>{""!==e.value?t.classList.add("hideLabel"):t.classList.remove("hideLabel")}))},newProject:(e,t,s)=>{for(let a=e.length-1;a<e.length;a+=1){const a=document.createElement("li");a.classList.add("projects"),a.setAttribute("data-selected","false");const n=document.createElement("div");n.classList.add("projectBG");const c=document.createElement("p");c.innerHTML=s,c.classList.add("projectTitle"),n.appendChild(c);const i=document.createElement("img");i.setAttribute("src","iconfinder_delete_3325111.png"),i.classList.add("remove"),a.appendChild(n),a.appendChild(i),n.classList.add("hoverBG"),t.appendChild(a),n.addEventListener("click",(()=>{for(let t=0;t<e.length;t+=1)document.querySelectorAll("li")[t].classList.remove("selectedBG");a.classList.add("selectedBG")}))}},showProjects:(e,t)=>{for(let s=0;s<e.length;s+=1){const a=document.createElement("li");a.classList.add("projects"),a.setAttribute("data-selected","false");const n=document.createElement("div");n.classList.add("projectBG");const c=document.createElement("p");c.innerHTML=e[s].title,c.classList.add("projectTitle"),n.appendChild(c);const i=document.createElement("img");i.setAttribute("src","iconfinder_delete_3325111.png"),i.classList.add("remove"),a.appendChild(n),a.appendChild(i),n.classList.add("hoverBG"),t.appendChild(a),n.addEventListener("click",(()=>{for(let t=0;t<e.length;t+=1)document.querySelectorAll("li")[t].classList.remove("selectedBG");a.classList.add("selectedBG")}))}},removeProject:e=>{e.addEventListener("click",(e=>{"remove"===e.target.classList[0]&&e.target.parentElement.remove()}))},showTasks:(t,s)=>{e(t);for(let e=0;e<s.length;e+=1){const t=document.createElement("div");t.classList.add("itemsContainer");const a=document.createElement("input");a.setAttribute("type","checkbox"),a.setAttribute("data-num",e),a.classList.add("item");const n=document.createElement("p");n.style.fontWeight="900",n.innerHTML=s[e].title,n.classList.add("item");const c=document.createElement("p");c.innerHTML=s[e].description,c.classList.add("item");const i=document.createElement("p");i.innerHTML=s[e].dueDate,i.classList.add("item");const r=document.createElement("p");r.innerHTML=s[e].priority,r.classList.add("italic"),r.classList.add("item");const d=document.createElement("img");d.setAttribute("src","iconfinder_trash_4115238.png"),d.setAttribute("data-num",e),d.classList.add("imgBin"),d.classList.add("item"),!0===s[e].complete&&(n.classList.add("strikeThrough"),c.classList.add("strikeThrough"),i.classList.add("strikeThrough"),r.classList.add("strikeThrough"),t.classList.add("done"),a.checked=!0),t.appendChild(a),t.appendChild(n),t.appendChild(c),t.appendChild(i),t.appendChild(r),t.appendChild(d),content.appendChild(t)}},showNoTasks:t=>{e(t)}}},n=document.querySelector("#main"),c=document.querySelector("#taskBtn"),i=document.querySelector("#taskForm"),r=document.querySelector("#taskSubmit"),d=document.querySelector("#projectBtn"),l=document.querySelector("#projectForm"),o=document.querySelector("#projectSubmit"),m=[];let u="",p=0;const h=document.getElementsByClassName("hoverBG"),L=()=>{const t=(e,t,s,a,n,c,i)=>{const r=t;r.title=s,r.description=a,r.dueDate=n,r.priority=c,r.complete=i,e.push(r)},c=e=>{m.push(new s(e)),localStorage.setItem("projects",JSON.stringify(m)),l.classList.add("visuallyhidden"),l.addEventListener("transitionend",(()=>{l.classList.add("hidden")}),{once:!0})};return{newTask:(e,t,s)=>{const a=s;a.title=t[2].value,a.description=t[3].value,a.dueDate=t[4].value,!0===t[5].checked?a.priority="low":!0===t[6].checked?a.priority="medium":a.priority="high",a.complete=!1,e.push(a),localStorage.setItem("projects",JSON.stringify(m)),t[2].value="",t[3].value="",document.querySelector("#titleLabel").classList.remove("hideLabel"),document.querySelector("#descriptionLabel").classList.remove("hideLabel"),i.classList.add("visuallyhidden"),i.addEventListener("transitionend",(()=>{i.classList.add("hidden")}),{once:!0})},taskManagement:e=>{e.addEventListener("click",(e=>{!function(e){"imgBin item"==e.target.classList&&(m[p].tasks.splice(e.target.dataset.num,1),a().showTasks(n,m[p].tasks),localStorage.setItem("projects",JSON.stringify(m)))}(e),function(e){"INPUT"==e.target.tagName&&"item"==e.target.classList&&(0==m[p].tasks[e.target.dataset.num].complete?m[p].tasks[e.target.dataset.num].complete=!0:m[p].tasks[e.target.dataset.num].complete=!1,a().showTasks(n,m[p].tasks),localStorage.setItem("projects",JSON.stringify(m)))}(e)}))},removeProject:e=>{e.addEventListener("click",(e=>{if("remove"==e.target.classList[0])for(let t=0;t<m.length;t++)e.target.parentElement.childNodes[0].childNodes[0].innerHTML==m[t].title&&(u==m[t].title&&a().showNoTasks(n),m.splice(t,1));null==m[0]?localStorage.removeItem("projects"):localStorage.setItem("projects",JSON.stringify(m))})),a().removeProject(e)},newProject:(e,t)=>{let s={};s=t[0].value;let n=!0;for(let t=0;t<e.length;t+=1)e[t].title===s&&(n=!1);n?(L().pushProject(s),a().newProject(m,document.querySelector("ul"),document.querySelectorAll("input")[0].value)):alert("Please enter a unique project name"),t[0].value="",document.querySelector("#projectLabel").classList.remove("hideLabel")},pushProject:c,currentProject:e=>{e.addEventListener("click",(e=>{"projectTitle"==e.target.classList?u=e.target.innerHTML:"projectBG hoverBG"==e.target.classList&&(u=e.target.childNodes[0].innerHTML);for(let e=0;e<m.length;e++)u==m[e].title&&(p=e,a().showTasks(n,m[p].tasks));return u}))},defaultProjectsandTasks:()=>{if(localStorage.getItem("projects")){let e=JSON.parse(localStorage.getItem("projects"));for(let t=0;t<e.length;t++)m.push(e[t]);a().showProjects(m,document.querySelector("ul")),h[0].parentElement.classList.add("selectedBG")}else c("Object Orientated Programming"),c("Fitness"),c("Chess"),t(m[0].tasks,new e("task"),"Practical Object-Oriented Design","Purchase and read up on Practical Object-Oriented Design: An Agile Primer Using Ruby.","2021-06-04","low",!1),t(m[0].tasks,new e("task"),"OOP Most common Principals","Read the article on Betterprogramming summarising the common concepts found in OOP.","2021-05-04","medium",!0),t(m[1].tasks,new e("task"),"Running","Increment distance of each run biweekly by .5km until 10km per run","2021-12-07","high",!1),t(m[2].tasks,new e("task"),"Maroczy Bind","Learn how to react to accelerated dragon players who create a light color complex.","2021-05-15","low",!1),t(m[2].tasks,new e("task"),"Rapid","Push to 1400 in rapid.","2021-04-30","medium",!0),t(m[2].tasks,new e("task"),"Blitz","Push to 1200 in blitz.","2021-05-30","high",!1),a().showProjects(m,document.querySelector("ul")),h[0].parentElement.classList.add("selectedBG"),localStorage.setItem("projects",JSON.stringify(m))}}};if(localStorage.getItem("userName"))a().displayWelcome(n);else{const e=new t(prompt("Enter your name:"));localStorage.setItem("userName",e.name),a().displayWelcome(n)}a().displayForm(c,i,"true"),a().displayForm(d,l),a().hideLabel(document.getElementById("title"),document.getElementById("titleLabel")),a().hideLabel(document.getElementById("description"),document.getElementById("descriptionLabel")),a().hideLabel(document.getElementById("projectInput"),document.getElementById("projectLabel")),L().defaultProjectsandTasks(),r.addEventListener("click",(t=>{document.querySelector("#taskForm").checkValidity()&&(t.preventDefault(),L().newTask(m[p].tasks,document.querySelectorAll("input"),new e("task")),a().showTasks(n,m[p].tasks))})),o.addEventListener("click",(e=>{document.querySelector("#projectForm").checkValidity()&&(e.preventDefault(),L().newProject(m,document.querySelectorAll("input")))})),a().showTasks(n,m[0].tasks),u=m[0].title,L().currentProject(document.querySelector("#main")),L().removeProject(document.querySelector("#main")),L().taskManagement(document.querySelector("#main"))})();