(()=>{"use strict";class e{constructor(e){this.name=e}}e.prototype.title,e.prototype.description,e.prototype.dueDate,e.prototype.priority,e.prototype.complete;class t{constructor(e){this.name=e}}class s{constructor(e){this.title=e,this.tasks=[]}}const n=()=>{function e(){this.parentElement.remove()}return{displayWelcome:e=>{let t=document.createElement("h1");t.setAttribute("id","welcome"),t.innerHTML=`Welcome ${localStorage.getItem("userName")}`,e.appendChild(t)},displayForm:(e,t,s)=>{e.addEventListener("click",(()=>{t.classList.contains("hidden")?(t.classList.remove("hidden"),setTimeout((function(){t.classList.remove("visuallyhidden")}),20),"true"==s&&t.classList.add("scale")):(t.classList.add("visuallyhidden"),t.addEventListener("transitionend",(function(e){t.classList.add("hidden"),t.classList.remove("scale")}),{capture:!1,once:!0,passive:!1}))}),!1)},hideLabel:(e,t)=>{e.addEventListener("input",(()=>{""!=e.value?t.classList.add("hideLabel"):t.classList.remove("hideLabel")}))},newProject:(e,t,s)=>{for(let n=e.length-1;n<e.length;n++){let n=document.createElement("li");n.classList.add("projects"),n.setAttribute("data-selected","false");let l=document.createElement("div");l.classList.add("projectBG");let d=document.createElement("p");d.innerHTML=s,l.appendChild(d);let a=document.createElement("button");a.innerHTML="x",a.classList.add("remove"),n.appendChild(l),n.appendChild(a),l.classList.add("hoverBG"),t.appendChild(n),l.addEventListener("click",(()=>{for(let t=0;t<e.length;t++)document.querySelectorAll("li")[t].classList.remove("selectedBG");n.classList.add("selectedBG")}))}},removeProject:t=>{for(let s=0;s<t.length;s++)t[s].removeEventListener("click",e);for(let s=0;s<t.length;s++)t[s].addEventListener("click",e)},showProjects:(e,t)=>{for(let s=0;s<e.length;s++){let n=document.createElement("li");n.classList.add("projects"),n.setAttribute("data-selected","false");let l=document.createElement("div");l.classList.add("projectBG");let d=document.createElement("p");d.innerHTML=e[s].title,l.appendChild(d);let a=document.createElement("img");a.setAttribute("src","iconfinder_delete_3325111.png"),a.classList.add("remove"),n.appendChild(l),n.appendChild(a),l.classList.add("hoverBG"),t.appendChild(n),l.addEventListener("click",(()=>{for(let t=0;t<e.length;t++)document.querySelectorAll("li")[t].classList.remove("selectedBG");n.classList.add("selectedBG")}))}},showTasks:(e,t)=>{document.querySelector("#content").remove();let s=document.createElement("div");s.setAttribute("id","content");let n=document.createElement("h3");n.innerHTML="Tasks",n.setAttribute("id","tasks"),s.appendChild(n),e.appendChild(s);let l=document.createElement("div");l.classList.add("headersContainer");let d=document.createElement("p"),a=document.createElement("h5");a.innerHTML="Title",a.classList.add("header");let c=document.createElement("h5");c.innerHTML="Description",c.classList.add("header");let i=document.createElement("h5");i.innerHTML="Due Date",i.classList.add("center"),i.classList.add("header");let r=document.createElement("h5");r.innerHTML="Priority",r.classList.add("center"),r.classList.add("header");let o=document.createElement("p");l.appendChild(d),l.appendChild(a),l.appendChild(c),l.appendChild(i),l.appendChild(r),l.appendChild(o),s.appendChild(l);for(let e=0;e<t.length;e++){let n=document.createElement("div");n.classList.add("itemsContainer");let l=document.createElement("div"),d=document.createElement("input");d.setAttribute("type","checkbox"),d.setAttribute("data-num",e);let a=document.createElement("div"),c=document.createElement("p");c.style.fontWeight="900",c.innerHTML=t[e].title;let i=document.createElement("div"),r=document.createElement("p");r.innerHTML=t[e].description;let o=document.createElement("div"),m=document.createElement("p");m.innerHTML=t[e].dueDate,o.classList.add("center");let u=document.createElement("div"),p=document.createElement("p");p.innerHTML=t[e].priority,p.classList.add("italic"),p.classList.add("center");let h=document.createElement("div"),L=document.createElement("img");L.setAttribute("src","iconfinder_trash_4115238.png"),L.classList.add("imgBin"),L.setAttribute("data-num",e),1==t[e].complete&&(c.classList.add("strikeThrough"),r.classList.add("strikeThrough"),m.classList.add("strikeThrough"),p.classList.add("strikeThrough"),n.classList.add("done"),d.checked=!0),l.appendChild(d),l.classList.add("item"),n.appendChild(l),a.appendChild(c),a.classList.add("item"),n.appendChild(a),i.appendChild(r),i.classList.add("item"),n.appendChild(i),o.appendChild(m),o.classList.add("item"),n.appendChild(o),u.appendChild(p),u.classList.add("item"),n.appendChild(u),h.appendChild(L),h.classList.add("item"),n.appendChild(h),s.appendChild(n)}},showNoTasks:e=>{document.querySelector("#content").remove();let t=document.createElement("div");t.setAttribute("id","content");let s=document.createElement("h3");s.innerHTML="Tasks",s.setAttribute("id","tasks"),t.appendChild(s),e.appendChild(t)}}},l=document.querySelector("#main"),d=document.querySelector("#taskBtn"),a=document.querySelector("#formContainer"),c=document.querySelector("#taskSubmit"),i=document.querySelector("#projectBtn"),r=document.querySelector("#projectForm"),o=document.querySelector("#projectSubmit"),m=[];let u,p,h=0;const L=document.getElementsByClassName("hoverBG"),g=document.getElementsByClassName("remove"),v=()=>{const t=(e,t,s,n,l,d,a)=>{t.title=s,t.description=n,t.dueDate=l,t.priority=d,t.complete=a,e.push(t)},d=e=>{m.push(new s(e)),localStorage.setItem("projects",JSON.stringify(m)),r.classList.add("visuallyhidden"),r.addEventListener("transitionend",(function(e){r.classList.add("hidden")}),{once:!0})},c=e=>{for(let t=0;t<e.length;t++)e[t].removeEventListener("click",i),e[t].addEventListener("click",i);n().removeProject(e)};function i(){for(let e=0;e<m.length;e++)m[e].title==this.parentElement.childNodes[0].childNodes[0].innerHTML&&h==e?(m.splice(e,1),console.log(e+1),console.log(h),n().showNoTasks(l)):m[e].title==this.parentElement.childNodes[0].childNodes[0].innerHTML&&(m.splice(e,1),console.log(e+1),console.log(h));null==m[0]?localStorage.removeItem("projects"):localStorage.setItem("projects",JSON.stringify(m))}function o(){m[h].tasks.splice(this.childNodes[0].dataset.num,1),C()}function k(){0==m[h].tasks[this.dataset.num].complete?m[h].tasks[this.dataset.num].complete=!0:m[h].tasks[this.dataset.num].complete=!1,C()}const y=(e,t)=>{for(let s=t;s<e.length;s++)e[s].addEventListener("click",E)};function E(){p=this.childNodes[0].innerHTML;for(let e=0;e<m.length;e++)p==m[e].title&&(h=e,C())}const C=()=>{n().showTasks(l,m[h].tasks),v().removeTask(document.getElementsByClassName("itemsContainer"),m[h].tasks),v().taskComplete(document.getElementsByClassName("itemsContainer"),m[h].tasks),localStorage.setItem("projects",JSON.stringify(m))};return{newTask:(e,t,s)=>{s.title=t[2].value,s.description=t[3].value,s.dueDate=t[4].value,1==t[5].checked?s.priority="low":1==t[6].checked?s.priority="medium":s.priority="high",s.complete=!1,e.push(s),localStorage.setItem("projects",JSON.stringify(m)),t[2].value="",t[3].value="",document.querySelector("#titleLabel").classList.remove("hideLabel"),document.querySelector("#descriptionLabel").classList.remove("hideLabel"),a.classList.add("visuallyhidden"),a.addEventListener("transitionend",(function(e){a.classList.add("hidden")}),{once:!0})},removeTask:(e,t)=>{for(let s=0;s<t.length;s++)e[s].childNodes[5].removeEventListener("click",o),e[s].childNodes[5].addEventListener("click",o)},taskComplete:(e,t)=>{for(let s=0;s<t.length;s++)e[s].childNodes[0].childNodes[0].removeEventListener("click",k),e[s].childNodes[0].childNodes[0].addEventListener("click",k)},removeProject:c,newProject:(e,t)=>{let s={};s=t[0].value;for(let t=0;t<e.length;t++)if(e[t].title==s)return alert("Please enter a unique project name");return v().pushProject(s)},pushProject:d,currentProject:y,defaultProjectsandTasks:()=>{if(localStorage.getItem("projects")){let e=JSON.parse(localStorage.getItem("projects"));for(let t=0;t<e.length;t++)m.push(e[t]);n().showProjects(m,document.querySelector("ul")),v().currentProject(L,0),v().removeProject(g),C(),L[0].parentElement.classList.add("selectedBG")}else d("Object Orientated Programming"),d("Fitness"),d("Chess"),t(m[0].tasks,u=new e("task"),"Practical Object-Oriented Design","Purchase and read up on Practical Object-Oriented Design: An Agile Primer Using Ruby.","2021-06-04","low",!1),t(m[0].tasks,u=new e("task"),"OOP Most common Principals","Read the article on Betterprogramming summarising the common concepts found in OOP.","2021-05-04","medium",!0),t(m[1].tasks,u=new e("task"),"Running","Increment distance of each run biweekly by .5km until 10km per run","2021-12-07","high",!1),t(m[2].tasks,u=new e("task"),"Maroczy Bind","Learn how to react to accelerated dragon players who create a light color complex.","2021-05-15","low",!1),t(m[2].tasks,u=new e("task"),"Rapid","Push to 1400 in rapid.","2021-04-30","medium",!0),t(m[2].tasks,u=new e("task"),"Blitz","Push to 1200 in blitz.","2021-05-30","high",!1),n().showProjects(m,document.querySelector("ul")),y(L,0),c(g),L[0].parentElement.classList.add("selectedBG"),C(),localStorage.setItem("projects",JSON.stringify(m))},tasksCRUD:C}};if(localStorage.getItem("userName"))n().displayWelcome(l);else{const e=new t(prompt("Enter your name:"));localStorage.setItem("userName",e.name),n().displayWelcome(l)}n().displayForm(d,a,"true"),n().displayForm(i,r),n().hideLabel(document.getElementById("title"),document.getElementById("titleLabel")),n().hideLabel(document.getElementById("description"),document.getElementById("descriptionLabel")),n().hideLabel(document.getElementById("projectInput"),document.getElementById("projectLabel")),v().defaultProjectsandTasks(),c.addEventListener("click",(t=>{document.querySelector("#taskForm").checkValidity()&&(t.preventDefault(),v().newTask(m[h].tasks,document.querySelectorAll("input"),u=new e("task")),v().tasksCRUD())})),o.addEventListener("click",(e=>{document.querySelector("#projectForm").checkValidity()&&(e.preventDefault(),v().newProject(m,document.querySelectorAll("input")),n().newProject(m,document.querySelector("ul"),document.querySelectorAll("input")[0].value),v().currentProject(L,L.length-1),v().removeProject(g))}))})();