(()=>{"use strict";class e{constructor(e){this.name=e}}e.prototype.title,e.prototype.description,e.prototype.dueDate,e.prototype.priority,e.prototype.complete;class t{constructor(e){this.name=e}}class s{constructor(e){this.title=e,this.tasks=[]}}const a=()=>{const e=e=>{document.querySelector("#content").remove();let t=document.createElement("div");t.setAttribute("id","content");let s=document.createElement("h3");s.innerHTML="Tasks",s.setAttribute("id","tasks"),t.appendChild(s),e.appendChild(t);let a=document.createElement("div");a.classList.add("headersContainer");let l=document.createElement("h5");l.innerHTML="Title",l.classList.add("header"),l.setAttribute("id","hTitle");let i=document.createElement("h5");i.innerHTML="Description",i.classList.add("header"),i.setAttribute("id","hDescription");let n=document.createElement("h5");n.innerHTML="Due-date",n.classList.add("hCenter"),n.classList.add("header"),n.setAttribute("id","hDueDate");let r=document.createElement("h5");r.innerHTML="Priority",r.classList.add("hCenter"),r.classList.add("header"),r.setAttribute("id","hPriority"),a.appendChild(l),a.appendChild(i),a.appendChild(n),a.appendChild(r),t.appendChild(a)};return{displayWelcome:e=>{let t=document.createElement("h1");t.setAttribute("id","welcome"),t.innerHTML=`Welcome ${localStorage.getItem("userName")}`,e.appendChild(t)},displayForm:(e,t,s)=>{e.addEventListener("click",(()=>{t.classList.contains("hidden")?(t.classList.remove("hidden"),setTimeout((function(){t.classList.remove("visuallyhidden")}),20),"true"==s&&t.classList.add("scale")):(t.classList.add("visuallyhidden"),t.addEventListener("transitionend",(function(e){t.classList.add("hidden"),t.classList.remove("scale")}),{capture:!1,once:!0,passive:!1}))}),!1)},hideLabel:(e,t)=>{e.addEventListener("input",(()=>{""!=e.value?t.classList.add("hideLabel"):t.classList.remove("hideLabel")}))},newProject:(e,t,s)=>{for(let a=e.length-1;a<e.length;a++){let a=document.createElement("li");a.classList.add("projects"),a.setAttribute("data-selected","false");let l=document.createElement("div");l.classList.add("projectBG");let i=document.createElement("p");i.innerHTML=s,i.classList.add("projectTitle"),l.appendChild(i);let n=document.createElement("img");n.setAttribute("src","iconfinder_delete_3325111.png"),n.classList.add("remove"),a.appendChild(l),a.appendChild(n),l.classList.add("hoverBG"),t.appendChild(a),l.addEventListener("click",(()=>{for(let t=0;t<e.length;t++)document.querySelectorAll("li")[t].classList.remove("selectedBG");a.classList.add("selectedBG")}))}},showProjects:(e,t)=>{for(let s=0;s<e.length;s++){let a=document.createElement("li");a.classList.add("projects"),a.setAttribute("data-selected","false");let l=document.createElement("div");l.classList.add("projectBG");let i=document.createElement("p");i.innerHTML=e[s].title,i.classList.add("projectTitle"),l.appendChild(i);let n=document.createElement("img");n.setAttribute("src","iconfinder_delete_3325111.png"),n.classList.add("remove"),a.appendChild(l),a.appendChild(n),l.classList.add("hoverBG"),t.appendChild(a),l.addEventListener("click",(()=>{for(let t=0;t<e.length;t++)document.querySelectorAll("li")[t].classList.remove("selectedBG");a.classList.add("selectedBG")}))}},removeProject:e=>{e.addEventListener("click",(e=>{"remove"==e.target.classList[0]&&e.target.parentElement.remove()}))},showTasks:(t,s)=>{e(t);for(let e=0;e<s.length;e++){let t=document.createElement("div");t.classList.add("itemsContainer");let a=document.createElement("input");a.setAttribute("type","checkbox"),a.setAttribute("data-num",e),a.classList.add("item");let l=document.createElement("p");l.style.fontWeight="900",l.innerHTML=s[e].title,l.classList.add("item");let i=document.createElement("p");i.innerHTML=s[e].description,i.classList.add("item");let n=document.createElement("p");n.innerHTML=s[e].dueDate,n.classList.add("item");let r=document.createElement("p");r.innerHTML=s[e].priority,r.classList.add("italic"),r.classList.add("item");let c=document.createElement("img");c.setAttribute("src","iconfinder_trash_4115238.png"),c.setAttribute("data-num",e),c.classList.add("imgBin"),c.classList.add("item"),1==s[e].complete&&(l.classList.add("strikeThrough"),i.classList.add("strikeThrough"),n.classList.add("strikeThrough"),r.classList.add("strikeThrough"),t.classList.add("done"),a.checked=!0),t.appendChild(a),t.appendChild(l),t.appendChild(i),t.appendChild(n),t.appendChild(r),t.appendChild(c),content.appendChild(t)}},showNoTasks:t=>{e(t)}}},l=document.querySelector("#main"),i=document.querySelector("#taskBtn"),n=document.querySelector("#taskForm"),r=document.querySelector("#taskSubmit"),c=document.querySelector("#projectBtn"),d=document.querySelector("#projectForm"),o=document.querySelector("#projectSubmit"),m=[];let u,p="",h=0;const L=document.getElementsByClassName("hoverBG"),g=(document.getElementsByClassName("remove"),()=>{const t=(e,t,s,a,l,i,n)=>{t.title=s,t.description=a,t.dueDate=l,t.priority=i,t.complete=n,e.push(t)},i=e=>{m.push(new s(e)),localStorage.setItem("projects",JSON.stringify(m)),d.classList.add("visuallyhidden"),d.addEventListener("transitionend",(function(e){d.classList.add("hidden")}),{once:!0})};return{newTask:(e,t,s)=>{s.title=t[2].value,s.description=t[3].value,s.dueDate=t[4].value,1==t[5].checked?s.priority="low":1==t[6].checked?s.priority="medium":s.priority="high",s.complete=!1,e.push(s),localStorage.setItem("projects",JSON.stringify(m)),t[2].value="",t[3].value="",document.querySelector("#titleLabel").classList.remove("hideLabel"),document.querySelector("#descriptionLabel").classList.remove("hideLabel"),n.classList.add("visuallyhidden"),n.addEventListener("transitionend",(function(e){n.classList.add("hidden")}),{once:!0})},taskManagement:e=>{e.addEventListener("click",(e=>{!function(e){"imgBin item"==e.target.classList&&(m[h].tasks.splice(e.target.dataset.num,1),a().showTasks(l,m[h].tasks),localStorage.setItem("projects",JSON.stringify(m)))}(e),function(e){"INPUT"==e.target.tagName&&"item"==e.target.classList&&(0==m[h].tasks[e.target.dataset.num].complete?m[h].tasks[e.target.dataset.num].complete=!0:m[h].tasks[e.target.dataset.num].complete=!1,a().showTasks(l,m[h].tasks),localStorage.setItem("projects",JSON.stringify(m)))}(e)}))},removeProject:e=>{e.addEventListener("click",(e=>{if("remove"==e.target.classList[0])for(let t=0;t<m.length;t++)e.target.parentElement.childNodes[0].childNodes[0].innerHTML==m[t].title&&(p==m[t].title&&a().showNoTasks(l),m.splice(t,1));null==m[0]?localStorage.removeItem("projects"):localStorage.setItem("projects",JSON.stringify(m))})),a().removeProject(e)},newProject:(e,t)=>{let s={};s=t[0].value;let l=!0;for(let t=0;t<e.length;t++)e[t].title==s&&(l=!1);l?(g().pushProject(s),a().newProject(m,document.querySelector("ul"),document.querySelectorAll("input")[0].value)):alert("Please enter a unique project name"),t[0].value="",document.querySelector("#projectLabel").classList.remove("hideLabel")},pushProject:i,currentProject:e=>{e.addEventListener("click",(e=>{"projectTitle"==e.target.classList?p=e.target.innerHTML:"projectBG hoverBG"==e.target.classList&&(p=e.target.childNodes[0].innerHTML);for(let e=0;e<m.length;e++)p==m[e].title&&(h=e,a().showTasks(l,m[h].tasks));return p}))},defaultProjectsandTasks:()=>{if(localStorage.getItem("projects")){let e=JSON.parse(localStorage.getItem("projects"));for(let t=0;t<e.length;t++)m.push(e[t]);a().showProjects(m,document.querySelector("ul")),L[0].parentElement.classList.add("selectedBG")}else i("Object Orientated Programming"),i("Fitness"),i("Chess"),t(m[0].tasks,u=new e("task"),"Practical Object-Oriented Design","Purchase and read up on Practical Object-Oriented Design: An Agile Primer Using Ruby.","2021-06-04","low",!1),t(m[0].tasks,u=new e("task"),"OOP Most common Principals","Read the article on Betterprogramming summarising the common concepts found in OOP.","2021-05-04","medium",!0),t(m[1].tasks,u=new e("task"),"Running","Increment distance of each run biweekly by .5km until 10km per run","2021-12-07","high",!1),t(m[2].tasks,u=new e("task"),"Maroczy Bind","Learn how to react to accelerated dragon players who create a light color complex.","2021-05-15","low",!1),t(m[2].tasks,u=new e("task"),"Rapid","Push to 1400 in rapid.","2021-04-30","medium",!0),t(m[2].tasks,u=new e("task"),"Blitz","Push to 1200 in blitz.","2021-05-30","high",!1),a().showProjects(m,document.querySelector("ul")),L[0].parentElement.classList.add("selectedBG"),localStorage.setItem("projects",JSON.stringify(m))}}});if(localStorage.getItem("userName"))a().displayWelcome(l);else{const e=new t(prompt("Enter your name:"));localStorage.setItem("userName",e.name),a().displayWelcome(l)}a().displayForm(i,n,"true"),a().displayForm(c,d),a().hideLabel(document.getElementById("title"),document.getElementById("titleLabel")),a().hideLabel(document.getElementById("description"),document.getElementById("descriptionLabel")),a().hideLabel(document.getElementById("projectInput"),document.getElementById("projectLabel")),g().defaultProjectsandTasks(),r.addEventListener("click",(t=>{document.querySelector("#taskForm").checkValidity()&&(t.preventDefault(),g().newTask(m[h].tasks,document.querySelectorAll("input"),u=new e("task")),a().showTasks(l,m[h].tasks))})),o.addEventListener("click",(e=>{document.querySelector("#projectForm").checkValidity()&&(e.preventDefault(),g().newProject(m,document.querySelectorAll("input")))})),a().showTasks(l,m[0].tasks),p=m[0].title,g().currentProject(document.querySelector("#main")),g().removeProject(document.querySelector("#main")),g().taskManagement(document.querySelector("#main"))})();