(()=>{"use strict";class e{constructor(e){this.name=e}}e.prototype.title,e.prototype.description,e.prototype.dueDate,e.prototype.priority;class t{constructor(e){this.name=e}}class n{constructor(e){this.title=e,this.tasks=[]}}const l=()=>{function e(){this.parentElement.remove()}function t(e,t,n){for(let n=0;n<e.length;n++)e[n].title==t.innerHTML&&e.splice(n,1);n.remove()}return{displayWelcome:e=>{let t=document.createElement("h1");t.innerHTML=`Welcome ${localStorage.getItem("userName")}`,e.appendChild(t)},displayForm:(e,t,n)=>{e.addEventListener("click",(()=>{t.classList.contains("hidden")?(t.classList.remove("hidden"),setTimeout((function(){t.classList.remove("visuallyhidden")}),20),"true"==n&&t.classList.add("scale")):(t.classList.add("visuallyhidden"),t.addEventListener("transitionend",(function(e){t.classList.add("hidden"),t.classList.remove("scale")}),{capture:!1,once:!0,passive:!1}))}),!1)},hideLabel:(e,t)=>{e.addEventListener("input",(()=>{""!=e.value?t.classList.add("hideLabel"):t.classList.remove("hideLabel")}))},showProjects:(e,t,n)=>{for(let l=e.length-1;l<e.length;l++){let l=document.createElement("li");l.classList.add("projects"),l.setAttribute("data-selected","false");let c=document.createElement("div");c.classList.add("projectBG");let o=document.createElement("p");o.innerHTML=n,c.appendChild(o);let d=document.createElement("button");d.innerHTML="x",d.classList.add("remove"),l.appendChild(c),l.appendChild(d),c.classList.add("hoverBG"),t.appendChild(l),c.addEventListener("click",(()=>{for(let t=0;t<e.length;t++)document.querySelectorAll("li")[t].classList.remove("selectedBG");l.classList.add("selectedBG")}))}},removeProject:t=>{for(let n=0;n<t.length;n++)t[n].removeEventListener("click",e);for(let n=0;n<t.length;n++)t[n].addEventListener("click",e)},showTasks:(e,n,l)=>{n.remove(),(n=document.createElement("div")).setAttribute("id","content");let c=document.createElement("h3");c.innerHTML="Tasks",c.setAttribute("id","tasks"),n.appendChild(c),e.appendChild(n);for(let e=0;e<l.length;e++){let c=document.createElement("div");c.classList.add("itemsContainer");let o=document.createElement("div"),d=document.createElement("input");d.setAttribute("type","checkbox"),o.appendChild(d),o.classList.add("item"),c.appendChild(o);let r=document.createElement("div"),i=document.createElement("p");i.innerHTML=l[e].title,r.appendChild(i),r.classList.add("item"),c.appendChild(r);let s=document.createElement("div"),a=document.createElement("p");a.innerHTML=l[e].description,s.appendChild(a),s.classList.add("item"),c.appendChild(s);let m=document.createElement("div"),u=document.createElement("p");u.innerHTML=l[e].dueDate,m.appendChild(u),m.classList.add("item"),c.appendChild(m);let p=document.createElement("div"),h=document.createElement("p");h.innerHTML=l[e].priority,p.appendChild(h),p.classList.add("item"),c.appendChild(p);let L=document.createElement("div"),v=document.createElement("button");v.innerHTML="🗑️",v.addEventListener("click",(()=>{t(l,i,c)})),L.appendChild(v),L.classList.add("item"),c.appendChild(L),console.log(c),n.appendChild(c)}}}},c=document.querySelector("#main"),o=document.querySelector("#taskButton"),d=document.querySelector("#formContainer"),r=document.querySelector("#taskSubmit"),i=document.querySelector("#projectBtn"),s=document.querySelector("#projectForm"),a=document.querySelector("#projectSubmit"),m=[];let u,p,h=0;const L=document.getElementsByClassName("hoverBG"),v=document.getElementsByClassName("remove"),y=()=>{function e(){for(let e=0;e<m.length;e++)m[e].title==this.parentElement.childNodes[0].childNodes[0].innerHTML&&m.splice(e,1),p==m[h].title&&l().showTasks(c,content,m[h].tasks)}function t(){p=this.childNodes[0].innerHTML;for(let e=0;e<m.length;e++)if(p==m[e].title)return console.log(m[e]),h=e,l().showTasks(c,content,m[h].tasks)}return{newTask:(e,t,n)=>{n.title=t[2].value,n.description=t[3].value,n.dueDate=t[4].value,1==t[5].checked?n.priority="low":1==t[6].checked?n.priority="medium":n.priority="high",e.push(n),console.log(m),console.log(e)},removeProject:t=>{console.log(m);for(let n=0;n<t.length;n++)t[n].removeEventListener("click",e),t[n].addEventListener("click",e);l().removeProject(t)},newProject:(e,t)=>{let n={};n=t[0].value;for(let t=0;t<e.length;t++)if(e[t].title==n)return alert("Please enter a unique project name");return y().pushProject(n)},pushProject:e=>{m.push(new n(e)),l().showProjects(m,document.querySelector("ul"),document.querySelectorAll("input")[0].value)},currentProject:e=>{for(let n=e.length-1;n<e.length;n++)e[n].addEventListener("click",t)},defaultProjects:(e,t)=>{e.push(t)}}};if(localStorage.getItem("userName"))l().displayWelcome(c);else{const e=new t(prompt("Enter your name:"));localStorage.setItem("userName",e.name),l().displayWelcome(c)}localStorage.getItem("projectArray")||new n("Tidy Room"),l().displayForm(o,d,"true"),l().displayForm(i,s),l().hideLabel(document.getElementById("title"),document.getElementById("titleLabel")),l().hideLabel(document.getElementById("description"),document.getElementById("descriptionLabel")),l().hideLabel(document.getElementById("projectInput"),document.getElementById("projectLabel")),r.addEventListener("click",(t=>{document.querySelector("#taskForm").checkValidity()&&(t.preventDefault(),y().newTask(m[h].tasks,document.querySelectorAll("input"),u=new e("task")),l().showTasks(c,content,m[h].tasks))})),a.addEventListener("click",(e=>{document.querySelector("#projectForm").checkValidity()&&(e.preventDefault(),y().newProject(m,document.querySelectorAll("input")),y().currentProject(L),y().removeProject(v))}))})();