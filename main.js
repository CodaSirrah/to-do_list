(()=>{"use strict";class e{constructor(e){this.name=e}}e.prototype.title,e.prototype.description,e.prototype.dueDate,e.prototype.priority,e.prototype.complete;class t{constructor(e){this.name=e}}class s{constructor(e){this.title=e,this.tasks=[]}}const n=()=>{function e(){this.parentElement.remove()}return{displayWelcome:e=>{let t=document.createElement("h1");t.setAttribute("id","welcome"),t.innerHTML=`Welcome ${localStorage.getItem("userName")}`,e.appendChild(t)},displayForm:(e,t,s)=>{e.addEventListener("click",(()=>{t.classList.contains("hidden")?(t.classList.remove("hidden"),setTimeout((function(){t.classList.remove("visuallyhidden")}),20),"true"==s&&t.classList.add("scale")):(t.classList.add("visuallyhidden"),t.addEventListener("transitionend",(function(e){t.classList.add("hidden"),t.classList.remove("scale")}),{capture:!1,once:!0,passive:!1}))}),!1)},hideLabel:(e,t)=>{e.addEventListener("input",(()=>{""!=e.value?t.classList.add("hideLabel"):t.classList.remove("hideLabel")}))},showProjects:(e,t,s)=>{for(let n=e.length-1;n<e.length;n++){let n=document.createElement("li");n.classList.add("projects"),n.setAttribute("data-selected","false");let l=document.createElement("div");l.classList.add("projectBG");let d=document.createElement("p");d.innerHTML=s,l.appendChild(d);let i=document.createElement("button");i.innerHTML="x",i.classList.add("remove"),n.appendChild(l),n.appendChild(i),l.classList.add("hoverBG"),t.appendChild(n),l.addEventListener("click",(()=>{for(let t=0;t<e.length;t++)document.querySelectorAll("li")[t].classList.remove("selectedBG");n.classList.add("selectedBG")}))}},removeProject:t=>{for(let s=0;s<t.length;s++)t[s].removeEventListener("click",e);for(let s=0;s<t.length;s++)t[s].addEventListener("click",e)},showTasks:(e,t)=>{document.querySelector("#content").remove();let s=document.createElement("div");s.setAttribute("id","content");let n=document.createElement("h3");n.innerHTML="Tasks",n.setAttribute("id","tasks"),s.appendChild(n),e.appendChild(s);for(let e=0;e<t.length;e++){let n=document.createElement("div");n.classList.add("itemsContainer");let l=document.createElement("div"),d=document.createElement("input");d.setAttribute("type","checkbox"),d.setAttribute("data-num",e);let i=document.createElement("div"),a=document.createElement("p");a.style.fontWeight="900",a.innerHTML=t[e].title;let c=document.createElement("div"),o=document.createElement("p");o.innerHTML=t[e].description;let r=document.createElement("div"),m=document.createElement("p");m.innerHTML=t[e].dueDate;let u=document.createElement("div"),p=document.createElement("p");p.innerHTML=t[e].priority;let h=document.createElement("div"),k=document.createElement("img");k.setAttribute("src","iconfinder_trash_4115238.png"),k.classList.add("imgBin"),k.setAttribute("data-num",e),1==t[e].complete&&(a.classList.add("strikeThrough"),o.classList.add("strikeThrough"),m.classList.add("strikeThrough"),p.classList.add("strikeThrough"),n.classList.add("done"),d.checked=!0),l.appendChild(d),l.classList.add("item"),n.appendChild(l),i.appendChild(a),i.classList.add("item"),n.appendChild(i),c.appendChild(o),c.classList.add("item"),n.appendChild(c),r.appendChild(m),r.classList.add("item"),n.appendChild(r),u.appendChild(p),u.classList.add("item"),n.appendChild(u),h.appendChild(k),h.classList.add("item"),n.appendChild(h),s.appendChild(n)}},showNoTasks:e=>{document.querySelector("#content").remove();let t=document.createElement("div");t.setAttribute("id","content");let s=document.createElement("h3");s.innerHTML="Tasks",s.setAttribute("id","tasks"),t.appendChild(s),e.appendChild(t)}}},l=document.querySelector("#main"),d=document.querySelector("#taskBtn"),i=document.querySelector("#formContainer"),a=document.querySelector("#taskSubmit"),c=document.querySelector("#projectBtn"),o=document.querySelector("#projectForm"),r=document.querySelector("#projectSubmit"),m=[];let u,p,h=0;const k=document.getElementsByClassName("hoverBG"),L=document.getElementsByClassName("remove"),v=()=>{function e(){if(m[h].title==this.parentElement.childNodes[0].childNodes[0].innerHTML)m.splice(h,1),n().showNoTasks(l);else for(let e=0;e<m.length;e++)m[e].title==this.parentElement.childNodes[0].childNodes[0].innerHTML&&m.splice(e,1)}function t(){m[h].tasks.splice(this.childNodes[0].dataset.num,1),n().showTasks(l,m[h].tasks),v().removeTask(document.getElementsByClassName("itemsContainer"),m[h].tasks)}function d(){0==m[h].tasks[this.dataset.num].complete?m[h].tasks[this.dataset.num].complete=!0:m[h].tasks[this.dataset.num].complete=!1,n().showTasks(l,m[h].tasks),v().removeTask(document.getElementsByClassName("itemsContainer"),m[h].tasks),v().taskComplete(document.getElementsByClassName("itemsContainer"),m[h].tasks)}function i(){p=this.childNodes[0].innerHTML;for(let e=0;e<m.length;e++)p==m[e].title&&(h=e,n().showTasks(l,m[h].tasks),v().removeTask(document.getElementsByClassName("itemsContainer"),m[h].tasks),v().taskComplete(document.getElementsByClassName("itemsContainer"),m[h].tasks))}return{newTask:(e,t,s)=>{s.title=t[2].value,s.description=t[3].value,s.dueDate=t[4].value,1==t[5].checked?s.priority="low":1==t[6].checked?s.priority="medium":s.priority="high",s.complete=!1,e.push(s)},removeTask:(e,s)=>{for(let n=0;n<s.length;n++)e[n].childNodes[5].removeEventListener("click",t),e[n].childNodes[5].addEventListener("click",t)},taskComplete:(e,t)=>{for(let s=0;s<t.length;s++)e[s].childNodes[0].childNodes[0].removeEventListener("click",d),e[s].childNodes[0].childNodes[0].addEventListener("click",d)},removeProject:t=>{for(let s=0;s<t.length;s++)t[s].removeEventListener("click",e),t[s].addEventListener("click",e);n().removeProject(t)},newProject:(e,t)=>{let s={};s=t[0].value;for(let t=0;t<e.length;t++)if(e[t].title==s)return alert("Please enter a unique project name");return v().pushProject(s)},pushProject:e=>{m.push(new s(e)),n().showProjects(m,document.querySelector("ul"),document.querySelectorAll("input")[0].value)},currentProject:e=>{for(let t=e.length-1;t<e.length;t++)e[t].addEventListener("click",i)},defaultProjects:(e,t)=>{e.push(t)}}};if(localStorage.getItem("userName"))n().displayWelcome(l);else{const e=new t(prompt("Enter your name:"));localStorage.setItem("userName",e.name),n().displayWelcome(l)}localStorage.getItem("projectArray")||new s("Tidy Room"),n().displayForm(d,i,"true"),n().displayForm(c,o),n().hideLabel(document.getElementById("title"),document.getElementById("titleLabel")),n().hideLabel(document.getElementById("description"),document.getElementById("descriptionLabel")),n().hideLabel(document.getElementById("projectInput"),document.getElementById("projectLabel")),a.addEventListener("click",(t=>{document.querySelector("#taskForm").checkValidity()&&(t.preventDefault(),v().newTask(m[h].tasks,document.querySelectorAll("input"),u=new e("task")),n().showTasks(l,m[h].tasks),v().removeTask(document.getElementsByClassName("itemsContainer"),m[h].tasks),v().taskComplete(document.getElementsByClassName("itemsContainer"),m[h].tasks))})),r.addEventListener("click",(e=>{document.querySelector("#projectForm").checkValidity()&&(e.preventDefault(),v().newProject(m,document.querySelectorAll("input")),v().currentProject(k),v().removeProject(L))}))})();